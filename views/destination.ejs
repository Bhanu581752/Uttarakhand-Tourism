<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Uttarakhand Destinations</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">


</head>
<body class="bg-gray-50 text-gray-800">

  <!-- Navbar -->
 <nav class="fixed top-0 left-0 w-full z-50 bg-white/90 backdrop-blur-md shadow-md">
  <div class="container mx-auto flex justify-between items-center px-6 py-3">

    <!-- Logo -->
    <a href="/" class="text-2xl font-extrabold text-green-700 tracking-wide hover:text-green-800 transition">
      UK-TourismExplorer <span class="text-gray-800"></span>
    </a>

    <!-- Desktop Menu -->
    <ul class="hidden md:flex space-x-8 items-center font-medium">
      <li>
        <a href="/" class="relative text-gray-700 hover:text-green-700 transition">
          Home
        </a>
      </li>

      <li>
        <a href="/profile" class="flex items-center text-gray-700 hover:text-green-700 text-2xl">
          <i class="bi bi-person-circle"></i>
        </a>
      </li>

      <% if (user && user.role === "admin") { %>
      <li>
        <a href="/add"
           class="bg-green-600 text-white px-5 py-2 rounded-full shadow hover:shadow-lg hover:bg-green-700 transition">
          Add Destination
        </a>
      </li>
      <% } %>
    </ul>

    <!-- Mobile Menu Button -->
    <button id="menu-btn" class="md:hidden text-3xl text-green-700 focus:outline-none">
      <i class="bi bi-list"></i>
    </button>
  </div>

  <!-- Mobile Dropdown -->
  <div id="menu" class="hidden md:hidden bg-white border-t border-gray-200 shadow-lg">
    <ul class="flex flex-col space-y-4 p-4 font-medium">
      <li><a href="/" class="hover:text-green-700">Home</a></li>
      <li><a href="/profile" class="hover:text-green-700">Profile</a></li>
      <% if (user && user.role === "admin") { %>
      <li><a href="/add" class="hover:text-green-700">Add Destination</a></li>
      <% } %>
    </ul>
  </div>
</nav>




  <div class="pt-24"></div> <!-- spacing for fixed navbar -->

  <!-- Destinations Section -->

<section id="destinations" class="py-16 container mx-auto px-6">
  <h2 class="text-3xl font-bold text-center mb-12">Top Destinations in Uttarakhand</h2>

  <!-- ðŸ” Search Bar -->
  <div class="flex justify-center mb-8">
    <input
      id="searchBar"
      type="text"
      placeholder="Search destinations..."
      class="w-full md:w-1/2 p-3 border rounded-lg shadow focus:outline-none focus:ring-2 focus:ring-green-500"
    >
  </div>

  <!-- Horizontal Scroll -->
  <div id="destinationContainer"class="flex space-x-6 overflow-x-auto pb-4 scrollbar-thin scrollbar-thumb-green-600 scrollbar-track-gray-200">

    <% destinations.forEach(destination => { %>
      <div class="destination-card flex-shrink-0 w-80 bg-white rounded-2xl overflow-hidden shadow-lg transform hover:scale-105 transition-transform duration-500 hover:shadow-2xl">

        <!-- Destination Image with gradient overlay -->
        <div class="relative h-56 overflow-hidden">
          <img src="<%= destination.image %>" alt="<%= destination.name %>"
               class="w-full h-full object-cover transition-transform duration-500 transform hover:scale-110">
          <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-50"></div>
        </div>

        <!-- Card Content -->
        <div class="p-6 relative z-10">
          <h3 class="destination-name text-xl font-bold mb-2 text-gray-800"><%= destination.name %></h3>
          <p class="destination-description text-gray-600 mb-4 line-clamp-3"><%= destination.description %></p>

          <!-- Badges -->
          <div class="flex justify-between items-center mb-4">
            <span class="bg-green-600 text-white text-sm font-semibold px-3 py-1 rounded-full">
              <%= destination.duration %> days
            </span>
            <span class="bg-yellow-500 text-white text-sm font-semibold px-3 py-1 rounded-full">
              â‚¹<%= destination.price %>
            </span>
          </div>

          <!-- Booking Form -->
          <form action="/book" method="POST" class="space-y-3">
            <input type="hidden" name="destination" value="<%= destination.name %>">
            <% if(user.role !== "admin"){%>
            <div>
              <label class="block text-sm font-semibold mb-1 text-gray-800">Number of Persons</label>
              <input type="number" name="persons" min="1"
                     class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                     placeholder="Enter number" required>
            </div>
            <div>
              <label class="block text-sm font-semibold mb-1 text-gray-800">Select Date</label>
              <input type="date" name="date"
                     class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                     required>
            </div>
            <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
              Book Now
            </button>
            <% }else{%>
            <div class="flex space-x-3 mt-4">
  <!-- Update Button -->
  <a href="/update/<%=destination.name%>"
     class="px-4 py-2 text-sm font-semibold text-white bg-blue-600 rounded-lg shadow hover:bg-blue-700 transition">
    Update
  </a>

  <!-- Delete Button -->
  <a href="/delete/<%=destination.name%>"
     class="px-4 py-2 text-sm font-semibold text-white bg-red-600 rounded-lg shadow hover:bg-red-700 transition">
    Delete
  </a>
</div>

             <%}%>
          </form>
        </div>
      </div>
    <% }) %>

  </div>
</section>


  <!-- Footer -->
  <footer class="bg-green-700 text-white text-center py-6 mt-10">
    <p>&copy; 2025 Uttarakhand Tourism. All Rights Reserved.</p>
  </footer>


<script>
  const searchBar = document.getElementById("searchBar");
  const cards = document.querySelectorAll(".destination-card");

  searchBar.addEventListener("input", () => {
    const query = searchBar.value.toLowerCase();
    cards.forEach(card => {
      const name = card.querySelector(".destination-name").textContent.toLowerCase();
      const desc = card.querySelector(".destination-description").textContent.toLowerCase();
      if (name.includes(query) || desc.includes(query)) {
        card.style.display = "block";
      } else {

        card.style.display = "none";
      }
    });
  });



  // Mobile menu toggle
  const btn = document.getElementById("menu-btn");
  const menu = document.getElementById("menu");
  btn.addEventListener("click", () => {
    menu.classList.toggle("hidden");
  });


  // const btn =document.getElementById("addDestinationBtn");
  // btn.addEventListener("click", async ()=>{

  //   const res=await fetch("/check-admin");
  //   const data=await res.json();

  //   if(data.success){
  //     window.location.href="/add";

  //   }else{

  //     const popup=document.createElement("div");
  //     popup.textContent="you are not an admin";
  //      popup.className = "fixed top-5 left-1/2 transform -translate-x-1/2 bg-red-600 text-white font-semibold px-6 py-3 rounded-lg shadow-lg z-50 text-center";
  //     document.body.appendChild(popup);

  //     setTimeout(()=>{
  //       popup.remove();
  //     },3000);
  //   }
  // })
</script>


</body>
</html>
